<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K8s vs Serverless Decision Diagram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="min-h-screen p-6">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="bg-white rounded-lg shadow-xl p-8 mb-6">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">
                            Kubernetes vs Serverless Decision Diagram
                        </h1>
                        <p class="text-gray-600">
                            Visual flowchart of all decision paths
                        </p>
                    </div>
                    <a href="index.html" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-700 font-medium">
                        ‚Üê Back to Home
                    </a>
                </div>
                
            
            </div>

            <!-- Legend -->
            <div class="bg-white rounded-lg shadow-xl p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Legend</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 bg-green-500 rounded border-2 border-green-700"></div>
                        <span class="text-gray-700 font-medium">Serverless Functions</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 bg-blue-600 rounded border-2 border-blue-800"></div>
                        <span class="text-gray-700 font-medium">Kubernetes</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 bg-orange-500 rounded border-2 border-orange-700"></div>
                        <span class="text-gray-700 font-medium">Hybrid Approach</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 bg-blue-100 rounded border-2 border-blue-400"></div>
                        <span class="text-gray-700 font-medium">Decision Points</span>
                    </div>
                </div>
            </div>

            <!-- Diagram Container -->
            <div class="bg-white rounded-lg shadow-xl p-8 mb-6">
                <div class="bg-gray-50 rounded-lg p-6 overflow-x-auto border border-gray-200">
                    <div class="mermaid">
graph LR
    Start[What is your<br/>workload type?] --> API[APIs / HTTP Services]
    Start --> Jobs[Background Jobs /<br/>Event Processing]
    Start --> Stream[Real-time /<br/>Streaming Data]
    Start --> Stateful[Stateful Applications<br/>DB, Cache, Brokers]
    Start --> Cron[Scheduled Tasks /<br/>Cron Jobs]

    %% API Path
    API --> Traffic{Traffic Pattern?}
    Traffic -->|Sporadic| ColdStart{Can tolerate<br/>cold starts?}
    Traffic -->|Steady| LatencyReq{Latency<br/>requirement?}
    Traffic -->|Sustained High| K8S_Traffic[‚úÖ KUBERNETES<br/>Cost-effective for<br/>sustained traffic]
    
    ColdStart -->|Yes| SL_API[‚úÖ SERVERLESS<br/>Pay-per-use model<br/>Auto-scale from zero]
    ColdStart -->|No| K8S_Latency[‚úÖ KUBERNETES<br/>Consistent low latency<br/>Always-warm containers]
    ColdStart -->|Mixed| Hybrid_API[üî∂ HYBRID<br/>K8s for critical<br/>Serverless for others]
    
    LatencyReq -->|Sub-50ms| K8S_Latency
    LatencyReq -->|100-500ms OK| SL_Steady[‚úÖ SERVERLESS<br/>with Provisioned<br/>Concurrency]

    %% Jobs Path
    Jobs --> Duration{Execution<br/>time?}
    Duration -->|< 5 min| Frequency{Job<br/>frequency?}
    Duration -->|5-15 min| Decompose{Can break<br/>into chunks?}
    Duration -->|> 15 min| K8S_Long[‚úÖ KUBERNETES<br/>Exceeds serverless<br/>timeout limits]
    
    Frequency -->|High throughput| K8S_Jobs[‚úÖ KUBERNETES<br/>Cost-effective for<br/>constant workload]
    Frequency -->|Intermittent| SL_Jobs[‚úÖ SERVERLESS<br/>Event-driven<br/>Queue triggers]
    
    Decompose -->|Yes| SL_Orchestrated[‚úÖ SERVERLESS<br/>Durable Functions<br/>Step Functions]
    Decompose -->|No| K8S_Mono[‚úÖ KUBERNETES<br/>Monolithic jobs<br/>need long runtime]

    %% Streaming Path
    Stream --> StreamType{Streaming<br/>type?}
    StreamType -->|WebSockets| K8S_WS[‚úÖ KUBERNETES<br/>Persistent connections<br/>Stable endpoints]
    StreamType -->|Event Streams| StreamComplex{Processing<br/>complexity?}
    StreamType -->|Media Streaming| K8S_Media[‚úÖ KUBERNETES<br/>Specialized infrastructure<br/>GPU support]
    
    StreamComplex -->|Simple transformations| SL_Stream[‚úÖ SERVERLESS<br/>Per-event processing<br/>Auto-scale with volume]
    StreamComplex -->|Stateful/Windowing| K8S_Stream[‚úÖ KUBERNETES<br/>Flink, Spark Streaming<br/>Complex processing]

    %% Stateful Path
    Stateful --> K8S_Stateful[‚úÖ KUBERNETES<br/>StatefulSets<br/>Persistent volumes<br/>Stable network IDs]

    %% Cron Path
    Cron --> CronType{Task<br/>characteristics?}
    CronType -->|Simple tasks| SL_Cron[‚úÖ SERVERLESS<br/>Timer triggers<br/>No idle costs]
    CronType -->|Complex workflows| CronDuration{Execution<br/>time?}
    
    CronDuration -->|< 10 min| SL_CronOrch[‚úÖ SERVERLESS<br/>with orchestration<br/>Durable/Step Functions]
    CronDuration -->|> 10 min| K8S_Cron[‚úÖ KUBERNETES<br/>CronJobs resource<br/>Long-running support]

    %% Styling
    classDef serverless fill:#4CAF50,stroke:#2E7D32,stroke-width:3px,color:#fff
    classDef kubernetes fill:#326CE5,stroke:#1565C0,stroke-width:3px,color:#fff
    classDef hybrid fill:#FF9800,stroke:#E65100,stroke-width:3px,color:#fff
    classDef decision fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    classDef start fill:#FFF3E0,stroke:#F57C00,stroke-width:3px
    
    class SL_API,SL_Steady,SL_Jobs,SL_Orchestrated,SL_Stream,SL_Cron,SL_CronOrch serverless
    class K8S_Traffic,K8S_Latency,K8S_Long,K8S_Jobs,K8S_Mono,K8S_WS,K8S_Media,K8S_Stream,K8S_Stateful,K8S_Cron kubernetes
    class Hybrid_API hybrid
    class Traffic,ColdStart,LatencyReq,Duration,Frequency,Decompose,StreamType,StreamComplex,CronType,CronDuration decision
    class Start start
                    </div>
                </div>

                <!-- Zoom Controls -->
                <div class="flex gap-3 mt-6 justify-center flex-wrap">
                    <button onclick="zoomIn()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium">
                        üîç Zoom In
                    </button>
                    <button onclick="zoomOut()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium">
                        üîç Zoom Out
                    </button>
                    <button onclick="resetZoom()" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors font-medium">
                        ‚Ü∫ Reset Zoom
                    </button>
                    <button onclick="window.print()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium">
                        üñ®Ô∏è Print Diagram
                    </button>
                </div>
            </div>

            <!-- Info Box -->
            <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 shadow-lg">
                <h3 class="font-semibold text-gray-800 mb-3 text-lg">üí° How to Use This Diagram</h3>
                <p class="text-gray-700 leading-relaxed">
                    Start from the left with your workload type and follow the decision paths to the right. 
                    Each path leads to a recommendation (Serverless, Kubernetes, or Hybrid) with specific reasoning. 
                    Green nodes indicate Serverless recommendations, blue nodes indicate Kubernetes, and orange nodes 
                    indicate a hybrid approach. This is a guidance tool - always evaluate your specific requirements, 
                    costs, and organizational constraints.
                </p>
            </div>

            <!-- Footer -->
            <div class="text-center mt-8 text-gray-600">
                <p class="text-sm">This is a guidance tool. Always evaluate specific requirements, costs, and organizational constraints.</p>
                <p class="text-xs mt-2">Decision Tree v1.0 ‚Ä¢ November 2025</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
        
        // Zoom functionality
        let currentZoom = 1;
        
        function zoomIn() {
            currentZoom += 0.1;
            applyZoom();
        }
        
        function zoomOut() {
            if (currentZoom > 0.3) {
                currentZoom -= 0.1;
                applyZoom();
            }
        }
        
        function resetZoom() {
            currentZoom = 1;
            applyZoom();
        }
        
        function applyZoom() {
            const svg = document.querySelector('.mermaid svg');
            if (svg) {
                svg.style.transform = `scale(${currentZoom})`;
                svg.style.transformOrigin = 'top left';
                svg.style.transition = 'transform 0.3s ease';
            }
        }
    </script>
</body>
</html>
